<app-navbar></app-navbar>
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl mx-auto">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Mon profil</h1>
      <p class="mt-1 text-gray-600">Gérez vos informations personnelles</p>
    </div>

    <form
      [formGroup]="profileForm"
      (ngSubmit)="onSubmit()"
      class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden"
    >
      <div class="p-6 space-y-6">
        <!-- Nom -->
        <div>
          <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
            Nom
          </label>
          <input
            id="name"
            type="text"
            formControlName="name"
            class="block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"
            placeholder="Votre nom"
          />
          <p *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('name') }}
          </p>
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
            Email
          </label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"
            placeholder="votre@email.com"
          />
          <p *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage('email') }}
          </p>
        </div>

        <!-- Nouveau mot de passe (optionnel) -->
        <div class="pt-4 border-t border-gray-200">
          <h2 class="text-sm font-medium text-gray-700 mb-3">Changer le mot de passe (optionnel)</h2>
          <div class="space-y-4">
            <div>
              <label for="newPassword" class="block text-sm text-gray-600 mb-1">Nouveau mot de passe</label>
              <input
                id="newPassword"
                type="password"
                formControlName="newPassword"
                class="block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"
                placeholder="Min. 8 caractères"
              />
              <p *ngIf="profileForm.get('newPassword')?.invalid && profileForm.get('newPassword')?.touched" class="mt-1 text-sm text-red-600">
                {{ getErrorMessage('newPassword') }}
              </p>
            </div>
            <div>
              <label for="confirmPassword" class="block text-sm text-gray-600 mb-1">Confirmer le mot de passe</label>
              <input
                id="confirmPassword"
                type="password"
                formControlName="confirmPassword"
                class="block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"
                placeholder="Confirmer"
              />
            </div>
          </div>
        </div>

        <!-- Messages -->
        <div *ngIf="errorMessage()" class="p-3 rounded-lg bg-red-50 text-red-700 text-sm">
          {{ errorMessage() }}
        </div>
        <div *ngIf="successMessage()" class="p-3 rounded-lg bg-green-50 text-green-700 text-sm">
          {{ successMessage() }}
        </div>
      </div>

      <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3">
        <a
          routerLink="/home"
          class="px-4 py-2 text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors"
        >
          Annuler
        </a>
        <button
          type="submit"
          [disabled]="isLoading() || profileForm.invalid"
          class="px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        >
          {{ isLoading() ? 'Enregistrement...' : 'Enregistrer' }}
        </button>
      </div>
    </form>
  </div>
</div>
<app-footer></app-footer>
